<form class="lesson-form" [formGroup]="lessonForm" (ngSubmit)="submit()">
  <div class="form-content">
    <div class="field-list">
      <div class="field">
        <mat-form-field appearance="fill">
          <mat-label>Start</mat-label>
          <input
            type="datetime-local"
            matInput
            [min]="currentTime"
            [max]="LessonFormKey.End"
            [formControlName]="LessonFormKey.Start"
            [readonly]="readOnly"
          />
          <mat-icon matSuffix class="start-date">schedule</mat-icon>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>End</mat-label>
          <input
            type="datetime-local"
            matInput
            [min]="LessonFormKey.Start"
            [formControlName]="LessonFormKey.End"
            [readonly]="readOnly"
          />
          <mat-icon matSuffix class="end-date">schedule</mat-icon>
        </mat-form-field>
      </div>
      <mat-form-field appearance="fill" class="field">
        <mat-label>Court</mat-label>
        <mat-select [formControlName]="LessonFormKey.Court">
          <mat-option
            *ngFor="let court of courts$ | async"
            [value]="court.id"
            [disabled]="readOnly"
            >{{ court.name }}</mat-option
          >
        </mat-select>
        <mat-icon matSuffix>place</mat-icon>
      </mat-form-field>
      <mat-form-field appearance="fill" class="field">
        <mat-label>Capacity</mat-label>
        <input
          type="number"
          matInput
          [formControlName]="LessonFormKey.Capacity"
          [readonly]="readOnly"
        />
        <mat-icon matSuffix>people</mat-icon>
      </mat-form-field>
      <mat-form-field
        appearance="fill"
        class="field"
        [ngClass]="{ 'readonly-select': readOnly }"
      >
        <mat-label>Type</mat-label>
        <mat-select [formControlName]="LessonFormKey.Level">
          <mat-option [value]="LessonLevel.Beginner">Beginner</mat-option>
          <mat-option [value]="LessonLevel.Advanced">Advanced</mat-option>
          <mat-option [value]="LessonLevel.Intermediate"
            >Intermediate</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="form-actions" *ngIf="readOnly">
    <button mat-flat-button color="primary" (click)="enroll()">
      enroll into the lesson
    </button>
  </div>
  <div class="form-actions" *ngIf="!readOnly">
    <button type="button" mat-flat-button color="warn" (click)="cancel()">
      {{ cancelButtonText }}
    </button>
    <button
      mat-flat-button
      color="primary"
      [disabled]="lessonForm.invalid || lessonForm.pristine"
    >
      {{ submitButtonText }}
    </button>
  </div>
</form>
